# Rasa 故事文件
# 故事定义了用户和助手之间的对话流程

version: "3.1"

stories:

# 基本问候故事
- story: 简单问候
  steps:
  - intent: greet
  - action: utter_greet

- story: 问候后询问帮助
  steps:
  - intent: greet
  - action: utter_greet
  - intent: ask_help
  - action: utter_ask_help

# 告别故事
- story: 简单告别
  steps:
  - intent: goodbye
  - action: utter_goodbye

- story: 问候后告别
  steps:
  - intent: greet
  - action: utter_greet
  - intent: goodbye
  - action: utter_goodbye

# 心情相关故事
- story: 表达好心情
  steps:
  - intent: mood_great
  - action: utter_mood_great

- story: 表达坏心情
  steps:
  - intent: mood_unhappy
  - action: utter_mood_unhappy

# 机器人身份确认
- story: 询问机器人身份
  steps:
  - intent: bot_challenge
  - action: utter_bot_challenge

# 航班预订故事
- story: 预订航班流程
  steps:
  - intent: book_flight
  - action: flight_booking_form
  - action: flight_booking_form
  - active_loop: flight_booking_form
  - slot_was_set:
    - requested_slot: departure_city
  - intent: inform
    entities:
    - city: "北京"
  - slot_was_set:
    - departure_city: "北京"
  - slot_was_set:
    - requested_slot: arrival_city
  - intent: inform
    entities:
    - city: "上海"
  - slot_was_set:
    - arrival_city: "上海"
  - slot_was_set:
    - requested_slot: travel_date
  - intent: inform
    entities:
    - date: "明天"
  - slot_was_set:
    - travel_date: "明天"
  - slot_was_set:
    - requested_slot: passenger_name
  - intent: inform
    entities:
    - person_name: "张三"
  - slot_was_set:
    - passenger_name: "张三"
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: action_book_flight

# 取消预订故事
- story: 取消预订流程
  steps:
  - intent: cancel_booking
  - action: utter_cancel_booking
  - intent: inform
    entities:
    - booking_id: "ABC123"
  - action: action_cancel_booking

# 天气询问故事
- story: 询问天气
  steps:
  - intent: ask_weather
  - action: utter_ask_weather

# 复杂对话流程
- story: 完整服务流程
  steps:
  - intent: greet
  - action: utter_greet
  - intent: book_flight
  - action:
  - action: flight_booking_form
  - active_loop: flight_booking_form
  - active_loop: null
  - action: action_book_flight
  - intent: affirm
  - action: utter_affirm
  - intent: goodbye
  - action: utter_goodbye

# 处理否认的情况
- story: 用户否认后提供帮助
  steps:
  - intent: book_flight
  - action: action_book_flight
  - intent: deny
  - action: utter_deny
  - intent: ask_help
  - action: utter_ask_help

# 中断对话流程
- story: 预订过程中告别
  steps:
  - intent: book_flight
  - action: action_book_flight
  - intent: goodbye
  - action: utter_goodbye

# 多轮对话示例
- story: 多次交互
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_great
  - action: utter_mood_great
  - intent: book_flight
  - action: action_book_flight
  - intent: deny
  - action: utter_deny
  - intent: ask_help
  - action: utter_ask_help
  - intent: affirm
  - action: utter_affirm
  - intent: goodbye
  - action: utter_goodbye

